import Map from 'ol/Map';
import Overlay from 'ol/Overlay';
import View from 'ol/View';
import TileLayer from 'ol/layer/Tile';
import 'ol/ol.css';
import { fromLonLat } from 'ol/proj';
import OSM from 'ol/source/OSM';
import { useEffect } from 'react';

const MapComponent = () => {
  useEffect(() => {
    const map = new Map({
      target: 'map',
      layers: [
        new TileLayer({
          source: new OSM()
        })
      ],
      view: new View({
        center: fromLonLat([51.18427610424875, 35.705992089908314]),
        maxZoom: 18,
        zoom: 18
      })
    });

    const markerElement = document.createElement('div');
    markerElement.innerHTML =
      '<img id="pointer" src="/Content/Images/location-marker.png" width="211" height="211" />';
    const marker = new Overlay({
      position: fromLonLat([51.18427610424875, 35.705992089908314]),
      positioning: 'center-center',
      element: markerElement,
      stopEvent: false
    });

    const tooltipTemplate = document.createElement('div');
    tooltipTemplate.innerHTML =
      '<div class="contact-us__info">' +
      '<p class="contact-us__info-item"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="16" viewBox="0 0 15 16" fill="none"><path d="M2.91144 0.664292C3.2005 0.689063 3.48134 0.837689 3.75696 1.10792C4.17374 1.51701 5.35239 3.01303 5.44352 3.45215C5.54435 3.94007 5.32326 4.32815 5.12682 4.66893C4.9259 5.02023 4.39035 5.68605 4.53003 6.07412C5.32252 8.02277 7.15323 9.72296 9.09972 10.5216C9.47916 10.6598 10.1432 10.1231 10.492 9.92038C10.8326 9.72371 11.2173 9.49852 11.7035 9.60211C12.1405 9.69444 13.6298 10.9052 14.0377 11.3248C14.3051 11.5996 14.4537 11.8833 14.4768 12.167C14.5172 13.2802 13.0069 14.5511 12.732 14.7094C12.3668 14.9729 11.9418 15.1058 11.4645 15.1058C10.9767 15.1058 10.433 14.9669 9.83993 14.6899C6.62217 13.3448 1.70665 8.51894 0.406996 5.32124C-0.132285 4.13073 -0.13602 3.1489 0.398032 2.41102C0.610906 2.06498 1.82466 0.618504 2.91144 0.664292ZM9.2318 2.69412L9.31357 2.70422C10.8769 3.00973 12.0832 4.22201 12.3887 5.79158C12.4566 6.14138 12.2281 6.48142 11.8808 6.55123C11.8389 6.55873 11.7978 6.56249 11.7568 6.56249C11.4505 6.56249 11.1846 6.34255 11.1264 6.04004C10.9217 4.9884 10.1143 4.17772 9.06858 3.97355C8.72126 3.90524 8.4927 3.56445 8.56067 3.2154C8.62864 2.86636 8.95654 2.63816 9.31357 2.70422L9.2318 2.69412ZM9.18333 0.0827484L9.26689 0.0887049C12.3002 0.427242 14.6552 2.79249 14.9958 5.84008C15.0152 6.01197 14.9667 6.18011 14.8599 6.31523C14.7523 6.45034 14.5999 6.53516 14.4289 6.55393C14.4042 6.55693 14.3803 6.55843 14.3557 6.55843C14.0285 6.55843 13.7544 6.31147 13.7178 5.9842C13.4444 3.54163 11.5547 1.64477 9.12348 1.37304C8.77093 1.33326 8.51622 1.01349 8.55581 0.659939C8.57448 0.485041 8.66038 0.328908 8.79782 0.220817C8.93152 0.114226 9.09957 0.0646845 9.26689 0.0887049L9.18333 0.0827484Z" fill="#BCC1C8" /></svg> <span>تلفن ثابت : 021-6420</span></p>' +
      '<p class="contact-us__info-item"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M11.9512 0.664753C13.024 0.664753 14.056 1.08875 14.8152 1.84955C15.5752 2.60875 16 3.63275 16 4.70475V11.0248C16 13.2568 14.184 15.0648 11.9512 15.0648H4.048C1.8152 15.0648 0 13.2568 0 11.0248V4.70475C0 2.47275 1.8072 0.664753 4.048 0.664753H11.9512ZM12.856 4.82475C12.688 4.81595 12.528 4.87275 12.4072 4.98475L8.8 7.86475C8.336 8.24955 7.6712 8.24955 7.2 7.86475L3.6 4.98475C3.3512 4.80075 3.0072 4.82475 2.8 5.04075C2.584 5.25675 2.56 5.60075 2.7432 5.84075L2.848 5.94475L6.488 8.78475C6.936 9.13675 7.4792 9.32875 8.048 9.32875C8.6152 9.32875 9.168 9.13675 9.6152 8.78475L13.224 5.89675L13.288 5.83275C13.4792 5.60075 13.4792 5.26475 13.2792 5.03275C13.168 4.91355 13.0152 4.84075 12.856 4.82475Z" fill="#BCC1C8" /></svg> <span>کدپستی : 1386167946</span></p>' +
      '<p class="contact-us__info-item"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="18" viewBox="0 0 13 18" fill="none"><path d="M6.5 0.811523C2.91633 0.811523 0 3.56454 0 6.94928C0 11.7586 5.889 16.7243 6.13961 16.9329C6.24289 17.0189 6.37144 17.0615 6.5 17.0615C6.62856 17.0615 6.75711 17.0189 6.86039 16.9336C7.111 16.7243 13 11.7586 13 6.94928C13 3.56454 10.0837 0.811523 6.5 0.811523ZM6.5 10.2907C4.50883 10.2907 2.88889 8.77199 2.88889 6.90527C2.88889 5.03855 4.50883 3.51986 6.5 3.51986C8.49117 3.51986 10.1111 5.03855 10.1111 6.90527C10.1111 8.77199 8.49117 10.2907 6.5 10.2907Z" fill="#BCC1C8" /></svg> <span>آدرس : تهران، کیلومتر 14 جاده مخصوص، بلوار ایران خودرو جنوبی، نرسیده به فتح، پلاک 2</span></p>' +
      '</div>';
    const tooltip = new Overlay({
      position: fromLonLat([51.18427610424875, 35.705992089908314]),
      positioning: 'bottom-left',
      //   element: tooltipTemplate,
      stopEvent: false
    });

    map.addOverlay(tooltip);
    map.addOverlay(marker);

    return () => {
      map.setTarget(null);
    };
  }, []);

  return <div id='map' style={{ width: '100%', height: '400px' }}></div>;
};

export default MapComponent;
